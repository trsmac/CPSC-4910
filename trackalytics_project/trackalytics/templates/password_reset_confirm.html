{% extends 'base.html' %}
{% load static %}

{% block title %}Set New Password{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">
{% endblock %}

{% block content %}
<div class="flex justify-center items-center h-[calc(100vh-80px)]">
  <form method="post" class="login-form bg-white p-10 rounded shadow-lg w-full max-w-md text-center">
    {% csrf_token %}
    <h4 class="text-sm text-gray-500 mb-1">Password Reset</h4>
    <h1 class="text-2xl font-bold text-[#1a1a2e] mb-4">Set New Password</h1>

    {% if validlink %}
      <p class="text-gray-700 mb-4">Enter your new password below.</p>

      {% if form.errors %}
        <div class="text-red-600 text-sm mb-2">
          <p>Please correct the errors below:</p>
          {{ form.errors }}
        </div>
      {% endif %}

      <input type="password" name="new_password1" placeholder="New Password" required class="input mb-4">
      <input type="password" name="new_password2" placeholder="Confirm New Password" required class="input mb-6">

      <button type="submit" class="login-btn w-full bg-[#1a1a2e] text-white py-2 rounded hover:bg-[#162447]">Change Password</button>

    {% else %}
      <p class="text-red-600">The password reset link is invalid or has expired.</p>
      <a href="{% url 'trackalytics:password_reset' %}" class="text-blue-600 hover:underline">Request a new one</a>
    {% endif %}
  </form>
</div>
{% endblock %}
